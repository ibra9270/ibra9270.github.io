"use strict";var app=angular.module("ives",["ngAnimate","uiGmapgoogle-maps","ngSanitize","embedCodepen"]);app.config(["uiGmapGoogleMapApiProvider",function(o){o.configure({key:"AIzaSyBgiSOyjgUXl8TTECe7j8HpIETBBVXb3zY",v:"3.17",libraries:"weather,geometry,visualization"})}]),app.config(["$sceDelegateProvider",function(o){o.resourceUrlWhitelist(["self","https://www.youtube.com/**"])}]),app.factory("ColorService",function(){function e(o,t,r){for(;o<t||r<o;)o<t?o+=r:o-=r;return o}return{colors:{},stringToRGB:function(o){var t=o.split("rgb")[1],r=(t=t.replace("(","").replace(")","").replace(" ","")).split(",");return{r:parseInt(r[0]),g:parseInt(r[1]),b:parseInt(r[2])}},rgbToString:function(o,t){var r="rgb";return(o.a||t)&&(r+="a"),r+="("+o.r+","+o.g+","+o.b,(o.a||t)&&(r+=", "+(o.a?o.a:t)),r+=")"},darken:function(o,t,r){return r?{r:Math.max(Math.floor(o.r-o.r*t),0),g:Math.max(Math.floor(o.g-o.g*t),0),b:Math.max(Math.floor(o.b-o.b*t),0)}:{r:Math.max(o.r-t,0),g:Math.max(o.g-t,0),b:Math.max(o.b-t,0)}},lighten:function(o,t,r){return r?{r:Math.min(Math.floor(o.r+o.r*t),255),g:Math.min(Math.floor(o.g+o.g*t),255),b:Math.min(Math.floor(o.b+o.b*t),255)}:{r:Math.min(o.r+t,255),g:Math.min(o.g+t,255),b:Math.min(o.b+t,255)}},averageColors:function(o,t){var r={};return r.r=Math.max(0,e(Math.floor((o.r+t.r)/2),0,255)),r.g=Math.max(0,e(Math.floor((o.g+t.g)/2),0,255)),r.b=Math.max(0,e(Math.floor((o.b+t.b)/2),0,255)),r},hexToRgb:function(o){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}}}),app.factory("ScrollService",function(){var t=!1;function o(){if(!t){var o=$(window).scrollTop()+$(window).innerHeight();$(".scrollfade").each(function(){$(this).offset().top+.3*$(this).outerHeight()<o&&$(this).removeClass("hidden")})}}return setTimeout(function(){t||($(".scrollfade").each(function(){$(this).addClass("hidden")}),o())},0),$(window).scroll(function(){return o()}),function(){$(".scrollfade").css("opacity",1),t=!0}}),app.directive("ngDrop",function(){return{restrict:"AE",scope:{options:"@"},link:function(r,o,t,e){var n=0,a=0,i=0,s=$("<div unselectable='on' id='circle'></div>");function c(){n=$(o).parent().width(),a=$(o).parent().height()+1500,$(o).parent().offset().left,$(o).parent().offset().top,i=Math.sqrt(n*n+a*a)}o.append(s),c(),$(window).resize(c),r.$watch("options",function(o){var t;o?(t=JSON.parse(r.options),s.css({position:"absolute","background-color":t.color,width:0,height:0,"border-radius":"50%",left:t.pos.x,top:t.pos.y,"margin-left":0,"margin-top":0,"webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none",opacity:1,"pointer-events":"none","-webkit-transform":"translateZ(0)"}),s.stop().animate({width:2*i,height:2*i,"margin-left":-i,"margin-top":-i},{duration:600,easing:"easeInOutCubic",queue:!0})):s.stop().animate({opacity:0},300)},!0)}}}),app.directive("ngHello",["ColorService",function(a){return{restrict:"AE",templateUrl:"/js/directives/hellocarddirective.html",link:function(o,t,r,e){$(t).find(".fa").click(function(){$(t).find(".fronttextcard").toggleClass("current"),$(t).find(".backtextcard").toggleClass("current"),$(t).toggleClass("backactive")});function n(){$(t).find(".darkcolor").css({color:a.rgbToString(a.colors.darkcolor)}),$(t).find(".ultradarkcolor").css({color:a.rgbToString(a.colors.ultradarkcolor)}),$(t).find(".ultradarkbgcolor").css({"background-color":a.rgbToString(a.colors.ultradarkcolor)}),$(t).find(".darkbgcolor").css({"background-color":a.rgbToString(a.colors.darkcolor)}),$(t).find(".active .fa").css("color","#fff")}o.$watch(function(){return a.colors},function(o){o&&!$.isEmptyObject(o)&&(!0,n())},!0),$(window).load(function(){$(t).css({opacity:1}),n()})}}}]),app.directive("ngNavigation",["ColorService",function(f){return{restrict:"AE",link:function(o,n,t,r){var a=void 0,i=[{name:"Home",element:$(".header"),icon:"home"},{name:"Skills",element:$("#skillrow"),icon:"lightbulb-o"},{name:"Experience",element:$("#experiencerow"),icon:"tasks"}];$(n).append("<span class='ultradarkcolor name'>Ibrahim Oueslati</span>");var e=$("<div class='bginfo'></div>");$(n).append(e),e.append("<span class='darkbgcolor bgrect'>Change</span>"),e.append("<span class='ultradarkbgcolor bgrect'>Colors</span>"),e.click(function(){o.resetBG()}),i.forEach(function(o){var t=$("<li></li>"),r=$("<i class='ultradarkcolor fa fa-"+o.icon+"'></i>");$(n).append(t);var e=$("<span class='detail'>"+o.name+"</span>");$(t).append(e),t.append(r),t.append(e),o.navitem=t,$(t).bind("mouseenter touchstart",function(){c(o)}),$(t).bind("mouseleave touchend",function(){a.navitem[0]!=t[0]&&l(o)}),$(t).click(function(){d(o)})});var s=function(o){for(var t=$("html").scrollTop(),r=$("body").scrollTop(),e=Math.max(t,r),n=0;n<i.length;n++){if(e<i[n].element.offset().top-$(window).height()/4){a&&a.navitem[0]==i[n-1].navitem[0]&&!o||(a&&(l(a),a.navitem.removeClass("active")),a=i[n-1],i[n-1].navitem.addClass("active"),i[n-1].element.addClass("visible"),ga("send","event",i[n-1].name,"scroll"),c(i[n-1]));break}n==i.length-1&&(a&&(l(a),a.navitem.removeClass("active")),a=i[n],i[n].navitem.addClass("active"),c(i[n]))}},c=function(o){o.navitem.css({"background-color":f.rgbToString(f.colors.darkcolor)}),o.navitem.find("i").css({color:"white"})},l=function(o){o.navitem.css({"background-color":""}),o.navitem.find("i").css({color:f.rgbToString(f.colors.ultradarkcolor)})},d=function(o){$("html, body").stop().animate({scrollTop:o.element.offset().top-59},800)},g=!1;o.$watch(function(){return f.colors},function(o){o&&!$.isEmptyObject(o)&&s(g=!0)},!0),$(window).scroll(function(){g&&s()})}}}]),app.directive("ngPortfolio",["ColorService",function(b){return{restrict:"AE",scope:{item:"@",transformfunction:"&"},link:function(d,g,o,t){var f,p,u,h,m,v;function r(o){if($(g).empty(),(f=$("<div class='portfoliocontainer'></div>")).css("background-color",o.color),g.append(f),o.front.image&&(p=$("<img src='"+o.front.image+"'></img>"),o.front.backgroundimage&&p.css({width:"100%"}),o.small&&p.css({width:"60%"}),f.append(p)),o.front.title&&(v=$("<div class='fronttitle'>"+o.front.title+"</div>"),f.append(v)),u=$("<div class='cover'></div>"),f.append(u),(h=$("<div class='itemtitle'>"+o.name+"</div>")).css({color:b.rgbToString(b.lighten(b.stringToRGB(o.color),80))}),f.append(h),!o.small){var t=$("<div class='iconbox col s4'></div>"),r=$("<i class='icon fa fa-calendar-o'></i>"),e=$("<div class='text'>"+o.calendar+"</div>");t.append(r),t.append(e);var n=$("<div class='iconbox col s4'></div>"),a=$("<i class='icon fa fa-clock-o'></i>"),i=$("<div class='text'>"+o.progress+"</div>");n.append(a),n.append(i);var s=$("<div class='iconbox col s4'></div>"),c=$("<i class='icon fa fa-tasks'></i>"),l=$("<div class='text'>"+o.tasks+"</div>");s.append(c),s.append(l),f.append(s),f.append(t),f.append(n)}m=$("<p class='description "+(o.small?"small":"")+"'>"+o.shortdescription+"</p>"),f.append(m),o.small&&(h.addClass("small"),m.addClass("small")),g.hover(function(){f.children().addClass("hover")},function(){f.children().removeClass("hover")}),g.mousedown(function(o){f.children().removeClass("hover")}),g.click(function(o){var t=JSON.parse(d.item);ga("send","event","PortfolioItem","click",t.name),o.offsetX||(o.offsetX=o.pageX-$(o.target).offset().left,o.offsetY=o.pageY-$(o.target).offset().top),d.transformfunction({item:t,pos:{x:o.offsetX+$(g).position().left,y:o.offsetY+$(g).position().top}})})}d.$watch("item",function(o){o&&r(JSON.parse(o))},!0),$(window).resize(function(){d.item&&r(JSON.parse(d.item))})}}}]),app.directive("ngProgress",function(){return{restrict:"AE",scope:{progress:"="},link:function(t,r,o,e){var n=$("<div id='full'></div>"),a=$("<span id='text'>"+100*t.progress+"%</span>");function i(){var o=r[0].offsetWidth;n.css({"z-index":2,display:"block",position:"absolute",left:0,height:"100%",width:o*t.progress,borderRadius:"inherit",backgroundColor:"inherit"}),a&&a.css({position:"absolute",display:"block",left:0,right:0,color:"white",textAlign:"center",width:o*t.progress,top:0,bottom:0})}$(r).append(n).append(a),$(window).resize(i),t.$watch("text",function(o){o&&a.text(t.text)},!0),i()}}}),app.directive("ngTrianglify",function(){return{restrict:"AE",scope:{options:"=",interval:"@"},link:function(t,o,r,e){var n,a=0,i=0,s=$("<canvas id='bg1''></canvas>").css({"z-index":0,position:"absolute"}),c=$("<canvas id='bg2''></canvas>").css({"z-index":1,position:"absolute"});function l(){return $(o).parent().css("height",o[0].offsetHeight),(o[0].offsetWidth>a||o[0].offsetHeight>i)&&(a=o[0].offsetWidth,i=o[0].offsetHeight,s.css("height",i),c.css("height",i),!0)}o.append(s),o.append(c),c.fadeOut(),l(),p(),t.$watch("interval",function(o){o&&!isNaN(o)&&0<o&&o<1e3?(n&&clearInterval(n),n=setInterval(function(){t.options=null,p()},Math.max(1e3,1e3*t.interval))):0==o&&n&&clearInterval(n)},!0),t.$watch("options",function(o){o||p()},!0),$(window).resize(function(){l()&&p()});var d=!0,g=!0,f=!1;function p(){if(g){var o=Trianglify({width:a,height:i,cell_size:150});t.options=o.opts,d=d?(o.canvas(s[0]),c.fadeOut(1e3),!1):(o.canvas(c[0]),c.fadeIn(1e3),!0),f=g=!1,setTimeout(function(){g=!0,f&&p()},1e3)}else f=!0}}}}),app.controller("ContactController",["$scope","$http",function(o,t){var r=this;this.data={},this.sendForm=function(){t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",o.contactForm.$valid&&($(".form").toggleClass("confirm"),$(".form").stop().animate({height:225},500),t({method:"POST",url:"/mail",data:$.param(r.data),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(o,t){$(".loading").addClass("hide"),200==t?$(".done").addClass("show"):$(".failed").addClass("show")}).error(function(o,t){$(".loading").addClass("hide"),$(".failed").addClass("show")}))}}]),app.controller("MainController",["$scope","uiGmapGoogleMapApi","ColorService","ScrollService",function(t,o,d,r){var e=this,n=moment("1991-02-28 15:59").startOf("minute");this.ageyears=moment().diff(n,"years"),this.agemonths=moment().subtract(this.ageyears,"years").diff(n,"months"),this.ageseconds=moment().subtract(this.ageyears,"years").subtract(this.agemonths,"months").diff(n,"seconds"),setInterval(function(){t.$apply(function(){e.ageseconds++})},1e3),o.then(function(o){t.map={center:{latitude:48.9225,longitude:2.2522},zoom:12,control:{}}});var a=!(this.showMaps=function(){$(".angular-google-map-container").toggleClass("activated")});t.$watch(function(){return $(".angular-google-map-container").height()},function(o){400!=o||a||(google.maps.event.trigger(t.map.control.getGMap(),"resize"),t.map.center={latitude:52.2233632,longitude:6.798508},a=!0)},!0),this.ivesimages=[];for(var i=0;i<1;i++)this.ivesimages.push("res/images/ibra"+i+".png");function s(){var o=$("html").scrollTop(),t=$("body").scrollTop();50<Math.max(o,t)?($(".header").removeClass("navigator"),$("ng-hello").addClass("navigator")):($(".header").addClass("navigator"),$("ng-hello").removeClass("navigator"))}this.currentIbra=Math.floor(1*Math.random()),this.changeIbraImage=function(){t.$$phase?e.currentIbra=(e.currentIbra+1)%1:t.$apply(function(){e.currentIbra=(e.currentIbra+1)%1})},$(".logocircle").hover(function(){$(this).find(".logo").css({color:d.rgbToString(d.colors.ultradarkcolor),"background-color":d.rgbToString(d.colors.darkcolor)})},function(){$(this).find(".logo").css({color:d.rgbToString(d.colors.lightcolor),"background-color":d.rgbToString(d.colors.ultradarkcolor)})}),t.interval=20,setTimeout(function(){t.$watch(function(){return t.triangleconfig},function(o){o&&(t.setColors(o),e.changeIbraImage())}),$(".hoverdarker").hover(function(){$(this).css("background-color",d.rgbToString(d.darken($(this).data("bgcolor"),30)))},function(){$(this).css("background-color",d.rgbToString($(this).data("bgcolor")))})},0),t.resetBG=function(){t.triangleconfig=null},t.setColors=function(o){var t=d.averageColors(d.hexToRgb(o.x_colors[0]),d.hexToRgb(o.y_colors[Math.floor(o.y_colors.length/2)])),r=d.averageColors(d.hexToRgb(o.x_colors[o.x_colors.length-1]),d.hexToRgb(o.y_colors[Math.floor(o.y_colors.length/2)])),e=d.averageColors(t,r),n=d.darken(e,60),a=d.lighten(e,30),i=e.r/255,s=e.g/255,c=e.b/255,l={r:Math.min(Math.floor(e.r+200*(1-i)),255),g:Math.min(Math.floor(e.g+200*(1-s)),255),b:Math.min(Math.floor(e.b+200*(1-c)),255)};d.colors.bgcolor=l,d.colors.darkcolor=e,d.colors.ultradarkbgcolor=n,d.colors.ultradarkcolor=n,d.colors.darkcolor=e,d.colors.lightcolor=a,d.colors.ultralightcolor=l,d.colors.descriptioncolor=d.lighten(a,45),d.colors.headercolor=d.darken(n,25),$(".bgcolor").css("background-color",d.rgbToString(l)).data("bgcolor",l),$(".darkbgcolor").css("background-color",d.rgbToString(e)).data("bgcolor",e),$(".ultradarkbgcolor").css("background-color",d.rgbToString(n)).data("bgcolor",n),$(".bgcolor-transparent").css("background-color",d.rgbToString(l,.75)).data("bgcolor",l),$(".darkbgcolor-transparent").css("background-color",d.rgbToString(e,.7)).data("bgcolor",e),$(".ultradarkbgcolor-transparent").css("background-color",d.rgbToString(n,.75)).data("bgcolor",n),$(".ultradarkcolor").css("color",d.rgbToString(n)).data("color",n),$(".darkcolor").css("color",d.rgbToString(e)).data("color",e),$(".lightcolor").css("color",d.rgbToString(a)).data("color",a),$(".ultralightcolor").css("color",d.rgbToString(l)).data("color",l),$(".headercolor").css("color",d.rgbToString(d.colors.headercolor)).data("color",d.colors.headercolor),$(".descriptioncolor").css("color",d.rgbToString(d.colors.descriptioncolor)).data("color",d.colors.descriptioncolor)},s(),$(window).scroll(s),this.goDown=function(){var o=0;o=$("#userinforow").offset().top-120+$("#userinforow")[0].offsetHeight-$(window).height()>$("#userinforow").offset().top?$("#userinforow").offset().top-120:$("#userinforow").offset().top+$("#userinforow")[0].offsetHeight-$(window).height(),$("html, body").stop().animate({scrollTop:o},800)}}]),app.controller("PortfolioController",["$scope","$http","ColorService",function(r,o,e){var n=this;this.items=[];var a=this;o.get("res/portfolioitems.json").then(function(o){n.items=o.data;for(var t=0;t<n.items.length;t++)n.items[t].delay=.1*t+"s"}),this.drop=void 0,this.transformfunction=function(t,o){setTimeout(function(){var o=e.stringToRGB(t.color);$(".portfoliorow").stop().animate({height:$(".backcontainer").height()+120},500),$(".portfoliolightcolor").css("color",e.rgbToString(e.lighten(o,80))),$(window).scrollTop()>$(".portfoliorow").offset().top&&$("html, body").stop().animate({scrollTop:$(".portfoliorow").offset().top},200)},300),r.$apply(function(){a.item=t,a.drop={color:t.bgcolor?t.bgcolor:t.color,pos:{x:o.x,y:o.y}}})},$(".images img").load(function(){$(".portfoliorow").stop().animate({height:$(".backcontainer").height()+120},500)}),this.reset=function(){a.drop=void 0,a.item=void 0,$(".frontportfolio").removeClass("invisible"),$(".backportfolio").removeClass("visible"),setTimeout(function(){$(".portfoliorow").stop().animate({height:$(".frontportfolio").height()+120},800)},300)}}]);